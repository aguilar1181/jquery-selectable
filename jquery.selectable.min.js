//
// jquery.selectable.js - Turn a collection of HTML elements into a selectable list
//
// Developed by Cory LaViska for A Beautiful Site, LLC
//
// Licensed under the MIT license: http://opensource.org/licenses/MIT
//
jQuery&&function(e){"use strict";function t(t){var l=this;e(l).data("options.selectable",t).on("click.selectable dblclick.selectable",t.items,function(t){e(t.target).parents().addBack().is("a")&&t.preventDefault(),u.call(l,this,t)})}function l(){e(this).removeData("disabled.selectable").removeData("lastChange.selectable").removeData("lastIndex.selectable").removeData("options.selectable").off("click.selectable").off("dblclick.selectable")}function a(){var t=this,l=e(t).data("options.selectable");e(t).data("disabled.selectable",!0).find(l.items).addClass(l.disabledClass)}function s(){var t=this,l=e(t).data("options.selectable");e(t).removeData("disabled.selectable").find(l.items).removeClass(l.disabledClass)}function c(){var t=this,l=e(t).data("options.selectable"),a=i.call(t),s=e(t).data("lastChange.selectable");s&&s===a||l.change&&l.change.call(t,a,n.call(t,!0))}function i(){var t=this,l=e(t).data("options.selectable"),a=[];return e(t).find(l.items+"."+l.selectedClass).each(function(){a.push(l.getValue.call(this))}),l.multiple?a:a[0]}function n(t){var l=this,a=e(l).data("options.selectable"),s=[];return t===!0?e(l).find(a.items+"."+a.selectedClass).toArray():void 0===t||null===t||t===!1?e(l).find(a.items).toArray():("string"==typeof t&&(t=[t]),e(l).find(a.items).each(function(){e.inArray(a.getValue.call(this),t)>-1&&s.push(this)}),s)}function d(){var t=this,l=e(t).data("options.selectable");l.multiple&&(e(t).find(l.items).addClass(l.selectedClass),c.call(t))}function o(){var t=this,l=e(t).data("options.selectable");e(t).find(l.items).removeClass(l.selectedClass),c.call(t)}function r(t){var l=this,a=e(l).data("options.selectable");"string"==typeof t&&(t=[t]),a.multiple||(t=[t[0]]),e(l).find(a.items).each(function(){e(this).toggleClass(a.selectedClass,e.inArray(a.getValue.call(this),t)>-1)}),c.call(l)}function u(t,l){var a=this,s=e(a).data("options.selectable"),n=e(t).index(),d=e(a).data("lastIndex.selectable");e(a).data("disabled.selectable")||"click"===l.type&&s.click&&(s.click.call(a,s.getValue.call(t),t,l)===!1||l.isDefaultPrevented())||"dblclick"===l.type&&s.doubleClick&&(s.doubleClick.call(a,s.getValue.call(t),t,l)===!1||l.isDefaultPrevented())||(s.multiple&&l.shiftKey&&void 0!==d?e(a).find(s.items).slice(Math.min(d,n),Math.max(d,n)+1).toggleClass(s.selectedClass,!e(t).hasClass(s.selectedClass)):s.multiple&&(l.metaKey||l.ctrlKey)?e(t).toggleClass(s.selectedClass):(e(a).find("."+s.selectedClass).length>1?e(t).addClass(s.selectedClass):e(t).toggleClass(s.selectedClass),e(a).find(s.items).not(t).removeClass(s.selectedClass)),c.call(a),e(a).data("lastIndex.selectable",n).data("lastChange.selectable",i.call(a)))}e.selectable={defaults:{getValue:function(){return e(this).attr("data-value")},items:"li",multiple:!1,disabledClass:"disabled",selectedClass:"selected"}},e.extend(e.fn,{selectable:function(u,h){switch("object"==typeof u&&(h=u),u){case"change":return e(this).each(c);case"destroy":return e(this).each(l);case"disable":return e(this).each(h===!1?s:a);case"getElements":return n.call(this,h);case"selectAll":return e(this).each(d);case"selectNone":return e(this).each(o);case"value":return void 0===h?i.call(this):e(this).each(function(){r.call(this,h)});default:return e(this).each(function(){t.call(this,e.extend({},e.selectable.defaults,h))})}}})}(jQuery);